# Movie Review Platform Roadmap

## Phase 0 – Discovery & Environment Prep (Day 0)

- Confirm access to Clerk project keys, Supabase project URL/anon key, and TMDB API credentials.
- Define environment variable schema (`.env.local`) and secret management approach.
- Deliverable: Updated README with prerequisites and environment instructions.

## Phase 1 – Project Bootstrap (Day 1)

- Scaffold React app (Vite + TypeScript recommended) with routing, state management, and styling baseline.
- Install and configure Clerk React SDK, Supabase JS client, and HTTP tooling.
- Establish shared UI primitives (layout, theme, typography, buttons, cards).
- Deliverables: Running development server with Clerk provider wrapper and basic navigation.

## Phase 2 – Authentication Experience (Days 2-3)

- Implement public routes for sign-up, sign-in, and forgot password using Clerk-hosted components.
- Secure application routes with Clerk middleware/`SignedIn`/`SignedOut` gates.
- Persist user profile metadata needed for reviews list filtering.
- Deliverables: Authenticated home screen gating, password reset flow, smoke-tested session handling.

## Phase 3 – Movie Discovery Module (Days 3-4)

- Integrate TMDB API via `fetch` with bearer token, centralized API client, and error handling.
- Implement listing grid with pagination (client-controlled page state) and server-side filters (genre, rating, release year).
- Enforce exclusion of adult (`include_adult=false`) results.
- Provide search, sorting, and movie detail drawer/modal (backdrop imagery + metadata).
- Deliverables: Interactive catalogue with stable pagination, filter UI, and responsive layout.

## Phase 4 – Reviews System (Days 4-5)

- Provision Supabase `reviews` table (SQL below) and enable Row Level Security with policy restricting writes to authenticated users.
- Build review submission form (star rating component + text area) scoped to signed-in users.
- Display aggregated reviews per movie with optimistic updates and skeleton states.
- Deliverables: Reviews persisted in Supabase and rendered in UI, basic moderation guardrails (length limits, profanity filter placeholder).

## Phase 5 – Quality, Observability, and Polish (Days 5-6)

- Add loading/error boundaries, empty-state messaging, and form validation.
- Implement analytics hooks (Clerk events) and logging around API failures.
- Write unit/integration tests for hooks and components (React Testing Library + Vitest).
- Deliverables: Passing CI (build + test), documented manual QA checklist.

## Phase 6 – Documentation & Handoff (Day 6)

- Finalize README with setup, environment, and deployment notes.
- Document Supabase table schema, RLS policies, and TMDB rate-limit considerations.
- Outline future enhancements (favorites, social sharing, recommendation engine).
- Deliverables: Up-to-date docs, backlog of stretch goals.

---

### Supabase `reviews` Table (execute separately)

```sql
create table public.reviews (
    id bigint generated by default as identity primary key,
    movie_id integer not null,
    user_id uuid not null,
    rating smallint not null check (rating between 1 and 5),
    content text not null check (char_length(content) between 10 and 2000),
    created_at timestamp with time zone default timezone('utc', now()) not null
);

alter table public.reviews
    add constraint reviews_user_movie_unique unique (movie_id, user_id);
```

> **Note:** Enable Row Level Security and add policies to permit authenticated users to insert/update their own reviews and read all reviews.
